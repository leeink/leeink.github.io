---
title: Unreal Engine5 C++ TPS 제작 - 2
date: 2024-02-23 17:00:00 +09:00
categories: [Unreal Engine]
tags: [Unreal Engine, Game, Programming]
---

# 에임 오프셋
이번 포스팅에서는 캐릭터의 에임을 위 아래로 겨눌 수 있게 한다.

# 0. 에임 오프셋을 만들기 위한 시퀀스 자르기
에임 오프셋을 만들 때 블렌드 스페이스처럼 만들면 되긴 하지만
블렌드 스페이스와는 다르게 시퀀스를 1프레임 정도까지만 남겨두고 잘라줘야한다.
이 프로젝트에서의 시점은 3인칭이므로 좌, 우 방향은 에임오프셋에서 만들지 않는다.

애니메이션 블렌드를 만들었을 때 사용한 idle 애니메이션의 복사본 1개만 만들어준다.
  
복사본 중 하나의 시퀀스 창을 열고 재생 되고 있는 키를 잡아 왼쪽 끝까지 옮겨 놓는다.
옮겨 놓고 우클릭해서 프레임을 지운다.  
![프레임 지우기](assets/UE5TPS/TPS-2/tps-2-0.png)  

그리고 에셋 디테일에서 다음과 같이 설정해준다.  
![에셋 디테일 설정](assets/UE5TPS/TPS-2/tps-2-1.png)  
이 시퀀스의 복사본을 2개 만들어준다.

다른 시퀀스 창을 열고 이번엔 위를 겨누는 에임을 만든다. 다음과 같이 한다.  
* 스켈레톤 트리로 이동해서 Spine본(현재 이 아바타 기준이므로 다른 아바타 사용하면
그에 맞는 스켈레톤 본을 선택해야함)에 회전을 가해준다. 여기서는 60도 정도 회전했다.  
![스켈레톤 트리 스파인 본 회전](assets/UE5TPS/TPS-2/tps-2-2.png)  
* 정면 에임을 만들 때와 동일하게 프레임을 잘라준다.
* 시퀀스 창 상단에 +Key 버튼을 눌러준다.
* 아래를 겨누는 것도 위 과정과 동일하게 만들어준다.


# 1. 에임 오프셋 만들기
AO_를 접두사로 하는 이름으로 에임 오프셋을 만들고 오프셋 에디터를 연다.
에셋 디테일에서 다음과 같이 설정해준다.  

![에임 오프셋 설정](assets/UE5TPS/TPS-2/tps-2-3.png)  

* 블렌드 스페이스때와 비슷하게 축의 이름을 정해준다
* Horizontal은 Yaw -180 ~ 180으로 값을 설정(지금 당장 쓸 일 없으니 설정 안해도 됨.)
* Vertical은 Pitch -90 ~ 90으로 값을 설정
* 위, 정면, 아래를 겨누는 시퀀스들을 (0, 90), (0, 0), (0, -90)에 배치

전부 완료하면 다음과 같이 된다.  

![최종 에임 오프셋](assets/UE5TPS/TPS-2/tps-2-4.png)  


# 2. 애니메이션 블루프린트 수정
다음과 같이 ABP를 수정해준다.  

![최종 에임 오프셋](assets/UE5TPS/TPS-2/tps-2-5.png)  

![최종 에임 오프셋](assets/UE5TPS/TPS-2/tps-2-6.png)  
360을 빼주는 것과 현재 pitch값이 180 이상인지 판단한 뒤 값을 설정 하는 이유는
마우스를 계속 돌리다 보면 무한히 회전할 수 있기에 그것을 방지하기 위해 카메라의
회전 각을 절단하는 것이다.

이것으로 이번 포스팅을 마친다.
